{"pageProps":{"xmlFeed":"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<feed xmlns=\"http://www.w3.org/2005/Atom\">\n    <id>https://emergencyexit.xyz//</id>\n    <title>å¸ƒé²æ–¯é±¼çš„å¦™æƒ³å¤©å¼€</title>\n    <updated>2022-10-17T12:07:45.241Z</updated>\n    <generator>https://github.com/jpmonette/feed</generator>\n    <author>\n        <name>amazing-blues</name>\n        <email>bluesedenyu@gmail.com</email>\n        <uri>https://emergencyexit.xyz/</uri>\n    </author>\n    <link rel=\"alternate\" href=\"https://emergencyexit.xyz//\"/>\n    <subtitle>æ­¤é—´çš„åšæ–‡å¤§æŠµæœ‰ä¸¤ç±»ï¼Œä¸€ç§æ˜¯æ°´çš„ï¼Œå¦ä¸€ç§ä»æ˜¯æ°´çš„ç½¢ã€‚ â€”â€” é²è¿…</subtitle>\n    <icon>https://emergencyexit.xyz//favicon.svg</icon>\n    <rights>All rights reserved 2022, amazing-blues</rights>\n    <entry>\n        <title type=\"html\"><![CDATA[WTF Go: Constants]]></title>\n        <id>https://emergencyexit.xyz//qffqfq</id>\n        <link href=\"https://emergencyexit.xyz//qffqfq\"/>\n        <updated>2022-10-11T00:00:00.000Z</updated>\n        <summary type=\"html\"><![CDATA[eeeee]]></summary>\n        <content type=\"html\"><![CDATA[<main class=\"notion light-mode notion-page notion-block-7545e035a53c4c9c97cee21bfc1b45e3\"><div class=\"notion-viewport\"></div><pre class=\"notion-code language-go\"><code class=\"language-go\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token string\">\"time\"</span>\n\t<span class=\"token string\">\"math/rand\"</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// invalid operation: rand.Intn(10) * 1000 * time.Millisecond (mismatched types int and time.Duration)</span>\ntime<span class=\"token punctuation\">.</span><span class=\"token function\">Sleep</span><span class=\"token punctuation\">(</span>rand<span class=\"token punctuation\">.</span><span class=\"token function\">Intn</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span> <span class=\"token operator\">*</span> time<span class=\"token punctuation\">.</span>Millisecond<span class=\"token punctuation\">)</span> âŒ\n\n<span class=\"token comment\">// ğŸ¤” make sense.</span>\ntime<span class=\"token punctuation\">.</span><span class=\"token function\">Sleep</span><span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">Duration</span><span class=\"token punctuation\">(</span>rand<span class=\"token punctuation\">.</span><span class=\"token function\">Intn</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> time<span class=\"token punctuation\">.</span>Millisecond<span class=\"token punctuation\">)</span> âœ…\n\n<span class=\"token comment\">// wtf ?!</span>\ntime<span class=\"token punctuation\">.</span><span class=\"token function\">Sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span> <span class=\"token operator\">*</span> time<span class=\"token punctuation\">.</span>Millisecond<span class=\"token punctuation\">)</span> âœ… \n</code></pre><div class=\"notion-text notion-block-aeddbd06e2fc4552b84e372fcc5bde9b\">çœ‹çœ‹ä¸Šé¢è¿™ä¸ªç®€å•çš„ä¾‹å­ï¼š</div><ul class=\"notion-list notion-list-disc notion-block-0022383a48734276b49c57d4b62fdeaa\"><li>ç¬¬ä¸€ä¸ªé”™è¯¯å¾ˆå®¹æ˜“ç†è§£ï¼š æ•´å‹ä¸èƒ½å’Œ <code class=\"notion-inline-code\">time.Duration</code> ç›¸ä¹˜</li></ul><ul class=\"notion-list notion-list-disc notion-block-3aefed93bfe6445d9097822c56293d44\"><li>ç¬¬äºŒä¸ªä¾‹å­ä¿®æ­£äº†è¿™ä¸€é—®é¢˜ï¼Œç¬¦åˆé¢„æœŸ</li></ul><ul class=\"notion-list notion-list-disc notion-block-6f15ca3587d54d10a5a4f259a01fcf58\"><li>ç¬¬ä¸‰ä¸ªä¾‹å­å¸¦æ¥äº†ç–‘é—®ï¼Œä¸ºä»€ä¹ˆ <code class=\"notion-inline-code\">1000 * time.Millisecond</code> å´æ²¡æœ‰é—®é¢˜ï¼Ÿæ˜æ˜ <code class=\"notion-inline-code\">1000</code> ä¹Ÿæ˜¯ä¸ªæ•´å‹ï¼Ÿç¼–è¯‘å™¨æˆ´äº†æœ‰è‰²çœ¼é•œï¼Ÿ</li></ul><div class=\"notion-text notion-block-3fe776d69ce041f1b3e64c181051b657\">åˆ«æ…Œï¼Œä»”ç»†çœ‹çœ‹ <code class=\"notion-inline-code\">rand.Intn(10) * 1000</code> å’Œ <code class=\"notion-inline-code\">1000</code> çš„åŒºåˆ«åœ¨äºï¼šå‰è€…æ˜¯å˜é‡ï¼Œç±»å‹å·²ç»ç¡®å®šäº†ï¼Œé€šä¸è¿‡ç¼–è¯‘æ˜¯æƒ…ç†ä¹‹ä¸­ï¼›è€Œåè€…æ˜¯å¸¸é‡ï¼Œç±»å‹å¹¶ä¸æ˜¯ <code class=\"notion-inline-code\">int</code> ï¼Œå±äº <code class=\"notion-inline-code\">untyped constants</code> ï¼Œç¼–è¯‘å™¨ä¼šå°è¯•å°†å®ƒè½¬æ¢æˆ <code class=\"notion-inline-code\">time.Duration</code> ã€‚</div><div class=\"notion-text notion-block-0e72d18a238e46329e5845a8599ceb30\">è¿™å°±å‹¾èµ·äº†æˆ‘çš„å¥½å¥‡å¿ƒï¼Œé‚£å¦‚æœæˆ‘å†™ä¸ªä¸€ä¸ª <code class=\"notion-inline-code\">float</code> å¸¸é‡ä¼šæ€æ ·å‘¢ï¼Ÿ</div><pre class=\"notion-code language-go\"><code class=\"language-go\">\n<span class=\"token comment\">// (untyped float constant) truncated to int64</span>\ntime<span class=\"token punctuation\">.</span><span class=\"token function\">Sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000.1</span> <span class=\"token operator\">*</span> time<span class=\"token punctuation\">.</span>Millisecond<span class=\"token punctuation\">)</span> âŒ</code></pre><div class=\"notion-text notion-block-9bceb4f93af04ff3808708f9f0673a59\">æœç„¶æ˜¯ä¸è¡Œçš„ã€‚é‚£ä¹ˆç©¶ç«Ÿè¿™ä¸ªæ— ç±»å‹å¸¸é‡çš„ç±»å‹è½¬æ¢æ˜¯ä¾ç…§ä»€ä¹ˆè§„åˆ™è¿›è¡Œçš„å‘¢ï¼Ÿ</div><div class=\"notion-text notion-block-cd1dc4daa31a431083bb670ef06adf8b\">é¦–å…ˆæ¯ä¸€ç§å¸¸é‡çš„<b>å†™æ³•</b>éƒ½ä¼šå¯¹åº”ç€ä¸€ç§é»˜è®¤ç±»å‹ï¼š</div><figure class=\"notion-asset-wrapper notion-asset-wrapper-image notion-block-2fdbb3a5741244af8b2f83856461e36c\"><div style=\"position:relative;display:flex;justify-content:center;align-self:center;width:540px;max-width:100%;flex-direction:column\"><img style=\"object-fit:cover\" src=\"https://www.notion.so/image/https%3A%2F%2Fs3.us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4841bfb7-5a0d-42ae-ba4c-55881d39feec%2FUntitled.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DAKIAT73L2G45EIPT3X45%252F20221017%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20221017T120744Z%26X-Amz-Expires%3D86400%26X-Amz-Signature%3D3eb4376fa9b7464146292cbdac05bc279c9cb6fd76e4c733c7d0872ce82040f1%26X-Amz-SignedHeaders%3Dhost%26x-id%3DGetObject?table=block&amp;id=2fdbb3a5-7412-44af-8b2f-83856461e36c&amp;cache=v2\" alt=\"notion image\" loading=\"lazy\" decoding=\"async\"/></div></figure><div class=\"notion-blank notion-block-8a966ee950464948b2087f66db1b3f62\">Â </div><div class=\"notion-text notion-block-5d52420866574289af6a0e1fd2054dd5\">ç„¶åï¼Œçœ‹çœ‹ <code class=\"notion-inline-code\">time.Duration</code> çš„å®šä¹‰ï¼š</div><pre class=\"notion-code language-go\"><code class=\"language-go\">type Duration int64\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">(</span>\n    Nanosecond  Duration <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    Microsecond          <span class=\"token operator\">=</span> <span class=\"token number\">1000</span> <span class=\"token operator\">*</span> Nanosecond\n    Millisecond          <span class=\"token operator\">=</span> <span class=\"token number\">1000</span> <span class=\"token operator\">*</span> Microsecond\n    Second               <span class=\"token operator\">=</span> <span class=\"token number\">1000</span> <span class=\"token operator\">*</span> Millisecond\n    Minute               <span class=\"token operator\">=</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> Second\n    Hour                 <span class=\"token operator\">=</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> Minute\n<span class=\"token punctuation\">)</span></code></pre><div class=\"notion-text notion-block-f927db596dd8470481b6d98a3de2ca57\">ä¹Ÿå°±æ˜¯è¯´ <code class=\"notion-inline-code\">1000</code> çš„å†™æ³•é»˜è®¤ç±»å‹ä¸º <code class=\"notion-inline-code\">int</code> ï¼Œç¼–è¯‘å™¨ä¼šå°è¯•åšä¸€æ¬¡ç±»å‹è½¬æ¢ <code class=\"notion-inline-code\">int</code> â†’ <code class=\"notion-inline-code\">time.Duration</code> ï¼Œè€Œ <code class=\"notion-inline-code\">int64</code> å’Œ <code class=\"notion-inline-code\">int</code> åˆèƒ½åšåˆ°å®Œå…¨å…¼å®¹ï¼Œæ‰€ä»¥ç¼–è¯‘é€šè¿‡ã€‚</div><div class=\"notion-blank notion-block-e2e94e0784cb4348bbec69b2bdc09138\">Â </div><div class=\"notion-text notion-block-3e6464aaa02340628ea464abeb427f08\">WTFï¼ŒGoâ€¦</div><h3 class=\"notion-h notion-h2 notion-h-indent-0 notion-block-4bb96aba79554c59a66add95e6674c10\" data-id=\"4bb96aba79554c59a66add95e6674c10\"><span><div id=\"4bb96aba79554c59a66add95e6674c10\" class=\"notion-header-anchor\"></div><a class=\"notion-hash-link\" href=\"#4bb96aba79554c59a66add95e6674c10\" title=\"å‚è€ƒï¼š\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a><span class=\"notion-h-title\">å‚è€ƒï¼š</span></span></h3><ul class=\"notion-list notion-list-disc notion-block-1fbc6a2020f441909fcf391c04892766\"><li><a target=\"_blank\" rel=\"noopener noreferrer\" class=\"notion-link\" href=\"https://go.dev/blog/constants\">https://go.dev/blog/constants</a> ï¼ˆæœ¬æ–‡ä¸»è¦æ¬è¿æ¥æºï¼‰</li></ul><ul class=\"notion-list notion-list-disc notion-block-d4ec28d9527d4135a64d0baaf5c2ec6b\"><li><a target=\"_blank\" rel=\"noopener noreferrer\" class=\"notion-link\" href=\"https://blog.learngoprogramming.com/learn-golang-typed-untyped-constants-70b4df443b61\">https://blog.learngoprogramming.com/learn-golang-typed-untyped-constants-70b4df443b61</a></li></ul><div class=\"notion-blank notion-block-4066b90cd3a2489183e2b264d1d11ab8\">Â </div></main>]]></content>\n    </entry>\n    <entry>\n        <title type=\"html\"><![CDATA[è®© DRF Views æ”¯æŒä¾èµ–æ³¨å…¥]]></title>\n        <id>https://emergencyexit.xyz//asdfasdfasdf</id>\n        <link href=\"https://emergencyexit.xyz//asdfasdfasdf\"/>\n        <updated>2021-05-24T00:00:00.000Z</updated>\n        <summary type=\"html\"><![CDATA[asdfasdfasd]]></summary>\n        <content type=\"html\"><![CDATA[<main class=\"notion light-mode notion-page notion-block-680e8aba94e74721952d011a44a20ebe\"><div class=\"notion-viewport\"></div><h3 class=\"notion-h notion-h2 notion-h-indent-0 notion-block-32d25641e8064c55bfcf9814a31d11fd\" data-id=\"32d25641e8064c55bfcf9814a31d11fd\"><span><div id=\"32d25641e8064c55bfcf9814a31d11fd\" class=\"notion-header-anchor\"></div><a class=\"notion-hash-link\" href=\"#32d25641e8064c55bfcf9814a31d11fd\" title=\"èµ·å› \"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a><span class=\"notion-h-title\">èµ·å› </span></span></h3><div class=\"notion-text notion-block-91535e58c80c4af0af7afd3bf9256bbb\">Django å’Œ <a target=\"_blank\" rel=\"noopener noreferrer\" class=\"notion-link\" href=\"https://www.django-rest-framework.org/\">Django REST framework</a> æ˜¯ Python å¼€å‘è€…å¸¸ç”¨çš„æ¡†æ¶ç»„åˆï¼Œé€šå¸¸æ¥è¯´ï¼Œä¸€ä¸ªå…¸å‹çš„ DRF å¼ API å¯èƒ½é•¿è¿™ä¸ªæ ·å­ï¼š</div><pre class=\"notion-code language-python\"><code class=\"language-python\">from rest_framework<span class=\"token punctuation\">.</span>generics <span class=\"token keyword\">import</span> ListAPIView\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ProfileViewSet</span><span class=\"token punctuation\">(</span>ListAPIView<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n    def <span class=\"token function\">login</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n        serializer <span class=\"token operator\">=</span> <span class=\"token function\">LoginSerializer</span><span class=\"token punctuation\">(</span>data<span class=\"token operator\">=</span>request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n        serializer<span class=\"token punctuation\">.</span><span class=\"token function\">is_valid</span><span class=\"token punctuation\">(</span>raise_exception<span class=\"token operator\">=</span>True<span class=\"token punctuation\">)</span>\n        validated_data <span class=\"token operator\">=</span> serializer<span class=\"token punctuation\">.</span>validated_data\n\n        <span class=\"token operator\">...</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">Response</span><span class=\"token punctuation\">(</span>data<span class=\"token operator\">=</span><span class=\"token function\">ProfileSerializer</span><span class=\"token punctuation\">(</span>results<span class=\"token punctuation\">,</span> many<span class=\"token operator\">=</span>True<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span></code></pre><div class=\"notion-blank notion-block-487e55663484486bae984465b860d412\">Â </div><div class=\"notion-text notion-block-89f7b3196141406fbd0883fe515d95fd\">è¿™æ ·å†™åœ¨é€»è¾‘ä¸Šæ˜¯ç®€å•çš„ï¼Œå¯ä»¥è®©å¼€å‘è€…å¯¹ç”¨æˆ·è¯·æ±‚å¤„ç†æœ‰ä¸€ä¸ªæ¸…æ™°çš„è„‰ç»œï¼Œä½†åŒæ—¶ä¹Ÿä¼šå¸¦æ¥é—®é¢˜ï¼š<code class=\"notion-inline-code\">Serializer</code> çš„é€»è¾‘å’Œä¸»é€»è¾‘æ··æ‚ï¼Œä½¿å•å…ƒæµ‹è¯•æ„é€ å›°éš¾ã€‚</div><div class=\"notion-text notion-block-13bf0cd7f4c74446b5dfc729ea5396f3\">åŒæ—¶ï¼Œè¾“å…¥è¾“å‡ºçš„ä»£ç åœ¨å¤šä¸ª API ä¸­æ˜¯æœ‰ä¸€å®šç¨‹åº¦é‡å¤çš„ï¼Œ <code class=\"notion-inline-code\">D.R.Y</code> é‡åº¦æ‚£è€…æ— æ³•æ¥å—ã€‚</div><div class=\"notion-blank notion-block-650523c412c54263b4d3fadc411836ac\">Â </div><h3 class=\"notion-h notion-h2 notion-h-indent-0 notion-block-470f666078b843248e033a9f28c499b2\" data-id=\"470f666078b843248e033a9f28c499b2\"><span><div id=\"470f666078b843248e033a9f28c499b2\" class=\"notion-header-anchor\"></div><a class=\"notion-hash-link\" href=\"#470f666078b843248e033a9f28c499b2\" title=\"å¯å‘\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a><span class=\"notion-h-title\">å¯å‘</span></span></h3><div class=\"notion-text notion-block-a2a1247b2eb0482da59d9fbdd337a427\">æ–°è´µæ¡†æ¶ <a target=\"_blank\" rel=\"noopener noreferrer\" class=\"notion-link\" href=\"https://fastapi.tiangolo.com/\">FastAPI</a> çš„ <a target=\"_blank\" rel=\"noopener noreferrer\" class=\"notion-link\" href=\"https://fastapi.tiangolo.com/tutorial/dependencies/#what-is-dependency-injection\">ä¾èµ–æ³¨å…¥ç‰¹æ€§</a> å°±èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³ä»¥ä¸Šä¸¤ç‚¹ï¼š</div><pre class=\"notion-code language-python\"><code class=\"language-python\">from fastapi <span class=\"token keyword\">import</span> Depends<span class=\"token punctuation\">,</span> FastAPI\n\napp <span class=\"token operator\">=</span> <span class=\"token function\">FastAPI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n@app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/items/\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">async</span> def <span class=\"token function\">read_items</span><span class=\"token punctuation\">(</span>commons<span class=\"token operator\">:</span> dict <span class=\"token operator\">=</span> <span class=\"token function\">Depends</span><span class=\"token punctuation\">(</span>common_parameters<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">return</span> commons</code></pre><div class=\"notion-blank notion-block-d6fed93f685d4f82963110dbf945a4bf\">Â </div><div class=\"notion-text notion-block-b300113037244b91b2af29fcf03a75eb\">ç„¶è€Œï¼Œç°å®ä¸­çš„å·¥ç¨‹ä¸­åˆ‡æ¢æ¡†æ¶å¾€å¾€æ˜¯æˆæœ¬é«˜æ˜‚çš„ï¼Œä»…ä»…ä¸ºäº†ä¾èµ–æ³¨å…¥è€Œåˆ‡æ¢æ¡†æ¶æ˜¾å¾—æœ‰äº›å°é¢˜å¤§åšã€‚æ‰€ä»¥ï¼Œå¦‚æœèƒ½åœ¨ Django &amp; DRF ä¸­å®ç°ç±»ä¼¼ä¾èµ–æ³¨å…¥çš„åŠŸèƒ½ï¼Œä¼šè¾ƒå¤§ç¨‹åº¦æé«˜ <code class=\"notion-inline-code\">views</code> çš„å¯è¯»æ€§å¹¶é™ä½ <a target=\"_blank\" rel=\"noopener noreferrer\" class=\"notion-link\" href=\"https://en.wikipedia.org/wiki/Test-driven_development\">TDD </a>çš„é—¨æ§›ï¼Œé—´æ¥æé«˜ä»£ç è´¨é‡ã€‚</div><div class=\"notion-blank notion-block-5417c9caad4d4972b620a9f3cb7f4970\">Â </div><div class=\"notion-text notion-block-9854566dd31942bbb20f6f9809b2457f\">åŒæ—¶æˆ‘ä»¬éœ€è¦æ»¡è¶³å‡ ä¸ªæ¡ä»¶ï¼š</div><ul class=\"notion-list notion-list-disc notion-block-06d2468f5457474b8f008732314be6b4\"><li>èƒ½å¤Ÿå…¼å®¹å½“å‰çš„ ViewSet ç±»</li></ul><ul class=\"notion-list notion-list-disc notion-block-018715b306484c6dbc85432e58b83052\"><li>èƒ½å¤Ÿå¤ç”¨ Serializer</li></ul><ul class=\"notion-list notion-list-disc notion-block-df76653a130e41f2a545222fb87fa0ea\"><li>ï¼ˆå¯é€‰ï¼‰èƒ½å¤Ÿå¤ç”¨ <code class=\"notion-inline-code\">drf-yasg</code></li></ul><div class=\"notion-blank notion-block-1635ff6ebfa040028a029b561366bf6a\">Â </div><div class=\"notion-text notion-block-4c336f4e870e4f92a6de773b562b3819\">ç»¼ä¸Šï¼Œæˆ‘å†™äº†ä¸€ä¸ª <a target=\"_blank\" rel=\"noopener noreferrer\" class=\"notion-link\" href=\"https://gist.github.com/IMBlues/e36e792159729f429f9abf656ba24d10\">ç®€å•çš„æ–‡ä»¶</a> ï¼Œä½ å¯ä»¥å°†å®ƒ Copy åˆ°ä½ çš„ DRF é¡¹ç›®ä¸­å°±å¯ä»¥æ”¹é€ åŸæ¥çš„ <code class=\"notion-inline-code\">ViewSet</code> </div><div class=\"notion-text notion-block-dfb6d917666e4461a530db83fda0262d\">ï¼ˆå½“å‰éœ€æ±‚æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå°è£…æˆ SDK ç„¶åå®‰è£…ä¾èµ–çš„æˆæœ¬åè€Œé«˜äºç›´æ¥å¤åˆ¶ç²˜è´´ï¼Œ<s>è¿™æ ·å¤§å®¶å¯ä»¥ä¸€èµ·å·æ‡’</s>ï¼‰</div><div class=\"notion-blank notion-block-b167cfdccb6c47efb572430771521082\">Â </div><h3 class=\"notion-h notion-h2 notion-h-indent-0 notion-block-771671b34a31433f911562dee8577d84\" data-id=\"771671b34a31433f911562dee8577d84\"><span><div id=\"771671b34a31433f911562dee8577d84\" class=\"notion-header-anchor\"></div><a class=\"notion-hash-link\" href=\"#771671b34a31433f911562dee8577d84\" title=\"æœ€åçš„æ•ˆæœï¼š\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a><span class=\"notion-h-title\">æœ€åçš„æ•ˆæœï¼š</span></span></h3><div class=\"notion-blank notion-block-17af11c97cbc4b1d93f5b89fa7d1282b\">Â </div><div class=\"notion-text notion-block-7fe4258f3236411f824763bc34aca3a9\">åŸæ¥çš„ <code class=\"notion-inline-code\">ViewSet</code> ï¼ˆåŒ…å« <code class=\"notion-inline-code\">drf-yasg</code> çš„ schema ç”Ÿæˆï¼‰</div><pre class=\"notion-code language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ProfileViewSet</span><span class=\"token punctuation\">(</span>ListAPIView<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n    @<span class=\"token function\">swagger_auto_schema</span><span class=\"token punctuation\">(</span>\n        request_body<span class=\"token operator\">=</span>LoginSerializer<span class=\"token punctuation\">,</span>\n        responses<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>status<span class=\"token punctuation\">.</span><span class=\"token constant\">HTTP_200_OK</span><span class=\"token operator\">:</span> <span class=\"token function\">ProfileSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span>\n    def <span class=\"token function\">login</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n        serializer <span class=\"token operator\">=</span> <span class=\"token function\">LoginSerializer</span><span class=\"token punctuation\">(</span>data<span class=\"token operator\">=</span>request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n        serializer<span class=\"token punctuation\">.</span><span class=\"token function\">is_valid</span><span class=\"token punctuation\">(</span>raise_exception<span class=\"token operator\">=</span>True<span class=\"token punctuation\">)</span>\n        validated_data <span class=\"token operator\">=</span> serializer<span class=\"token punctuation\">.</span>validated_data\n\n        <span class=\"token operator\">...</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">Response</span><span class=\"token punctuation\">(</span>data<span class=\"token operator\">=</span><span class=\"token function\">ProfileSerializer</span><span class=\"token punctuation\">(</span>results<span class=\"token punctuation\">,</span> many<span class=\"token operator\">=</span>True<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span></code></pre><div class=\"notion-blank notion-block-d547ba772b374495a23c34f531714dc2\">Â </div><div class=\"notion-text notion-block-60d9ef93f6764e24bedaa76a6d5b16f0\">æ”¹é€ ä¹‹åçš„æ•ˆæœï¼š</div><pre class=\"notion-code language-python\"><code class=\"language-python\">from some_path<span class=\"token punctuation\">.</span>inject <span class=\"token keyword\">import</span> serializer_inject\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ProfileViewSet</span><span class=\"token punctuation\">(</span>ListAPIView<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n    @<span class=\"token function\">serializer_inject</span><span class=\"token punctuation\">(</span>\n        in_cls<span class=\"token operator\">=</span>LoginSerializer<span class=\"token punctuation\">,</span>\n        out_cls<span class=\"token operator\">=</span>ProfileSerializer<span class=\"token punctuation\">,</span>\n        # é€‰æ‹©å»æ‰åŸæœ‰çš„ request ä¾èµ–\n        config<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"remain_request\"</span><span class=\"token operator\">:</span> False<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        out_params<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"many\"</span><span class=\"token operator\">:</span> True<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span>\n    def <span class=\"token function\">login</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">validated_data</span><span class=\"token operator\">:</span> dict<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n        # åŸæ¥çš„é€»è¾‘éƒ¨åˆ†\n        <span class=\"token operator\">...</span>\n        <span class=\"token keyword\">return</span> results</code></pre><div class=\"notion-text notion-block-75e90e26df1e496fae329bc50189185a\">ï¼ˆå¯ä»¥é€šè¿‡ <a target=\"_blank\" rel=\"noopener noreferrer\" class=\"notion-link\" href=\"https://gist.github.com/IMBlues/e36e792159729f429f9abf656ba24d10#gistcomment-3754830\">gist è¯„è®º</a> è·å–æ›´å¤šçš„ä¾‹å­ï¼‰</div><div class=\"notion-blank notion-block-178df46b51be40f39833f7e739f6fa69\">Â </div><div class=\"notion-text notion-block-759f22f4cc5b4ec99bc33aaf3f7a1e6a\">è¿™æ ·çš„æ”¹é€ æˆ‘ä»¬å¾—åˆ°äº†ä¸€äº›å¥½å¤„ï¼š</div><ul class=\"notion-list notion-list-disc notion-block-00853b638ffa4752a1f3c6ff23bae24d\"><li>ä»…éœ€è¦ç®€å•æ”¹é€ åŸæ¥çš„ <code class=\"notion-inline-code\">ViewSet</code> </li></ul><ul class=\"notion-list notion-list-disc notion-block-b2f732fd222743e18b2124bdf07c7ca6\"><li>å®Œå…¨ç»§æ‰¿åŸæ¥çš„ <code class=\"notion-inline-code\">Serializer</code> </li></ul><ul class=\"notion-list notion-list-disc notion-block-b1b80a8daad7457a89e597ef8a162d24\"><li>å®Œæ•´æ”¯æŒ <code class=\"notion-inline-code\">drf-yasg</code> </li></ul><ul class=\"notion-list notion-list-disc notion-block-b0ba56669bfd404188022485e144a991\"><li>åœ¨åŸæ¥ä¸»å¹²é€»è¾‘æ²¡æœ‰ä¾èµ– <code class=\"notion-inline-code\">request</code> å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œå•å…ƒæµ‹è¯•çš„ç”¨ä¾‹æ„é€ è¢«ç®€åŒ–æˆäº† <code class=\"notion-inline-code\">dict</code> </li></ul><div class=\"notion-blank notion-block-c1b95c8cb2b34115939e834f030e59c8\">Â </div><div class=\"notion-text notion-block-3bd340124d074872b83a16c9231d6132\">å½“ç„¶ä»æ—§è¿˜æœ‰ä¸å®Œç¾çš„åœ°æ–¹ï¼š</div><ul class=\"notion-list notion-list-disc notion-block-da6776d758d24314bafcbd32db93339b\"><li>æ²¡æœ‰ä½¿ç”¨ <code class=\"notion-inline-code\">Type Annotation</code> ï¼Œåœ¨å£°æ˜ä¸Šè¾ƒ <code class=\"notion-inline-code\">FastAPI</code> æ›´ä¸ºå†—ä½™</li></ul><ul class=\"notion-list notion-list-disc notion-block-5d20efd05c664ced8175b0b0ac5ae291\"><li>å¯¹äºè¿”å›å€¼ä½¿ç”¨äº† <code class=\"notion-inline-code\">context</code> çš„ <code class=\"notion-inline-code\">Serializer</code> éœ€è¦é€šè¿‡ <code class=\"notion-inline-code\">inject.ResponseParams</code> ç±»æ¥åŒ…è£…ä¸€æ¬¡ï¼Œæ˜¾å¾—ä¸é‚£ä¹ˆçº¯ç²¹ï¼Œæš‚æ—¶ä¹Ÿæ²¡æœ‰æ›´å¥½çš„æ€è·¯ï¼Œ<s>æœ‰ç©ºå†æ…¢æ…¢æ”¹ï¼ˆå’•å’•ğŸ¦ï¼‰ã€‚</s></li></ul><div class=\"notion-blank notion-block-01e6b58440774af28ddef8d0de6a2ca9\">Â </div></main>]]></content>\n    </entry>\n</feed>"},"__N_SSG":true}