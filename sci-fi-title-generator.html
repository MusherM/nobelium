<!DOCTYPE html><html lang="zh-CN"><head><meta name="viewport" content="width=device-width"/><title>Portfolio 项目总结</title><meta name="robots" content="follow, index"/><meta charSet="UTF-8"/><meta name="keywords" content="Blog, Notion, Tech, React, Vue"/><meta name="description" content="总结一下使用Nextjs部署github page时遇到的img标签的路径问题"/><meta property="og:locale" content="zh-CN"/><meta property="og:title" content="Portfolio 项目总结"/><meta property="og:description" content="总结一下使用Nextjs部署github page时遇到的img标签的路径问题"/><meta property="og:url" content=""/><meta property="og:image" content="https://og-image-craigary.vercel.app/Portfolio%20%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93.png?theme=dark&amp;md=1&amp;fontSize=125px&amp;images=https%3A%2F%2Fnobelium.vercel.app%2Flogo-for-dark-bg.svg"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:description" content="总结一下使用Nextjs部署github page时遇到的img标签的路径问题"/><meta name="twitter:title" content="Portfolio 项目总结"/><meta name="twitter:image" content="https://og-image-craigary.vercel.app/Portfolio%20%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93.png?theme=dark&amp;md=1&amp;fontSize=125px&amp;images=https%3A%2F%2Fnobelium.vercel.app%2Flogo-for-dark-bg.svg"/><meta property="article:published_time"/><meta property="article:author" content="Musher"/><meta name="next-head-count" content="18"/><link rel="preload" href="/fonts/IBMPlexSansVar-Roman.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/fonts/IBMPlexSansVar-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="preload" as="style" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/><noscript><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&amp;display=swap"/></noscript><link rel="icon" href="/favicon.svg" type="image/svg+xml"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" sizes="192x192" href="/apple-touch-icon.png"/><link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/feed"/><meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)"/><meta name="theme-color" content="#18181B" media="(prefers-color-scheme: dark)"/><link rel="preload" href="/_next/static/css/8e8bd7c50b2739f5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e8bd7c50b2739f5.css" data-n-g=""/><link rel="preload" href="/_next/static/css/6a5815369e10547f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6a5815369e10547f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-c0a56147c8fcef8f.js" defer=""></script><script src="/_next/static/chunks/main-e557dee8cfeafd6c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0d060ef29aac93dd.js" defer=""></script><script src="/_next/static/chunks/b5f2ed29-08db60af0c3043ba.js" defer=""></script><script src="/_next/static/chunks/684-63c1a25e215d8bed.js" defer=""></script><script src="/_next/static/chunks/580-c0214944b9e37cce.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-36397aa552609343.js" defer=""></script><script src="/_next/static/ZO-KWHKOMjkxVuegrG4mH/_buildManifest.js" defer=""></script><script src="/_next/static/ZO-KWHKOMjkxVuegrG4mH/_ssgManifest.js" defer=""></script><script src="/_next/static/ZO-KWHKOMjkxVuegrG4mH/_middlewareManifest.js" defer=""></script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap"/></head><body class="bg-day dark:bg-night"><div id="__next" data-reactroot=""><div><div class="wrapper font-sans"><div class="observer-element h-4 md:h-12"></div><div class="sticky-nav m-auto w-full h-6 flex flex-row justify-between items-center mb-2 md:mb-12 py-8 bg-opacity-60 max-w-3xl px-4" id="sticky-nav"><div class="flex items-center"><a aria-label="Musher&#x27;s Frontend Coding Blog" href="/"><div class="h-6"><svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="14" cy="14" r="14" class="fill-current text-black dark:text-white"></circle><circle cx="14" cy="14" r="14" fill="url(#paint0_radial)"></circle><circle cx="8" cy="8" r="2" fill="white"></circle><defs><radialGradient id="paint0_radial" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="rotate(45) scale(39.598)"><stop stop-color="#7FF72A" stop-opacity="1"></stop><stop offset="1" stop-color="#001FCC" stop-opacity="0.1"></stop></radialGradient></defs></svg></div></a><p class="ml-2 font-medium text-day dark:text-night header-name">Portfolio 项目总结</p></div><div class="flex-shrink-0"><ul class="flex flex-row"><li class="block ml-4 text-black dark:text-gray-50 nav"><a href="/about">关于</a></li><li class="block ml-4 text-black dark:text-gray-50 nav"><a href="/tag/surfing">冲浪</a></li><li class="block ml-4 text-black dark:text-gray-50 nav"><a href="/search">搜索</a></li></ul></div></div><main class="m-auto flex-grow w-full transition-all max-w-3xl px-4"><article><h1 class="font-bold text-3xl text-black dark:text-white">🏠<!-- --> <!-- -->Portfolio 项目总结</h1><nav class="flex mt-7 items-start text-gray-500 dark:text-gray-400"><div class="flex mb-4"><a href="#" class="flex"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2724%27%20height=%2724%27/%3e"/></span><img alt="Musher" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Musher" srcSet="https://gravatar.com/avatar/4ac574457377d00535c99cd294c7250c?imwidth=32 1x, https://gravatar.com/avatar/4ac574457377d00535c99cd294c7250c?imwidth=48 2x" src="https://gravatar.com/avatar/4ac574457377d00535c99cd294c7250c?imwidth=48" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="rounded-full" loading="lazy"/></noscript></span><p class="ml-2 md:block">Musher</p></a><span class="block"> / </span></div><div class="mr-2 mb-4 md:ml-0">2024 年 5 月 29 日</div><div class="flex flex-nowrap max-w-full overflow-x-auto article-tags"><a href="/tag/React"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">React</p></a><a href="/tag/Next.js"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">Next.js</p></a><a href="/tag/Website"><p class="mr-1 rounded-full px-2 py-1 border leading-none text-sm dark:border-gray-600">Website</p></a></div><div> <img src="https://www.notion.so/images/page-cover/nasa_eagle_in_lunar_orbit.jpg"/> </div></nav><div class="-mt-4"><main class="notion light-mode notion-page notion-block-c62e81a103a94b5c9a554e56867de3e4"><div class="notion-viewport"></div><div class="notion-collection-row"><div class="notion-collection-row-body"><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M10.889 5.5H3.11v1.556h7.778V5.5zm1.555-4.444h-.777V0H10.11v1.056H3.89V0H2.333v1.056h-.777c-.864 0-1.548.7-1.548 1.555L0 12.5c0 .856.692 1.5 1.556 1.5h10.888C13.3 14 14 13.356 14 12.5V2.611c0-.855-.7-1.555-1.556-1.555zm0 11.444H1.556V3.944h10.888V12.5zM8.556 8.611H3.11v1.556h5.445V8.61z"></path></svg><div class="notion-collection-column-title-body">date</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-date">May 29, 2024</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">slug</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text">sci-fi-title-generator</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">status</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"><div class="notion-property-select-item notion-item-red">Published</div></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M4 3a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zM2 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2z"></path></svg><div class="notion-collection-column-title-body">tags</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-multi_select"><div class="notion-property-multi_select-item notion-item-gray">React</div><div class="notion-property-multi_select-item notion-item-green">Next.js</div><div class="notion-property-multi_select-item notion-item-pink">Website</div></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">summary</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text">总结一下使用Nextjs部署github page时遇到的img标签的路径问题</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">type</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"><div class="notion-property-select-item notion-item-purple">Post</div></span></div></div></div></div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-0a4c3d88bc0f49768be9047295ce0b24" data-id="0a4c3d88bc0f49768be9047295ce0b24"><span><div id="0a4c3d88bc0f49768be9047295ce0b24" class="notion-header-anchor"></div><a class="notion-hash-link" href="#0a4c3d88bc0f49768be9047295ce0b24" title="静态资源路径问题"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">静态资源路径问题</span></span></h2><pre class="notion-code language-javascript"><code class="language-javascript"><span class="token comment">/** @type {import('next').NextConfig} */</span>
<span class="token keyword">const</span> isProd <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">"production"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> nextConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token string">"export"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">basePath</span><span class="token operator">:</span> isProd <span class="token operator">?</span> <span class="token string">"/Portofolio"</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token literal-property property">assetPrefix</span><span class="token operator">:</span> isProd <span class="token operator">?</span> <span class="token string">"/Portofolio/"</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token literal-property property">images</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">unoptimized</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token constant">NEXT_PUBLIC_ASSET_PREFIX</span><span class="token operator">:</span> isProd <span class="token operator">?</span> <span class="token string">"/Portofolio"</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> nextConfig<span class="token punctuation">;</span></code></pre><div class="notion-text notion-block-df693aea004043f1876efd43f7bb5f49">部署项目的过程中出现的问题：对于public文件夹中的静态资源，可以直接通过<code class="notion-inline-code">/1.png</code>访问，但编译后的<code class="notion-inline-code">/1.png</code>，将直接指向根目录，在本地这是<code class="notion-inline-code">C://</code>，在github page这是<code class="notion-inline-code">musherm.github.io/</code>，但实际上的静态资源地址在<code class="notion-inline-code">musherm.github.io/Portofolio</code>，该如何正确指向该地址？</div><pre class="notion-code language-html"><code class="language-html">// icon='/b1.svg'
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{</span>
    <span class="token attr-name">(process.env.NEXT_PUBLIC_ASSET_PREFIX</span> <span class="token attr-name">||</span> <span class="token attr-name">"")</span> <span class="token attr-name">+</span> <span class="token attr-name">icon</span>
  <span class="token attr-name">}</span>
  <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{icon}</span>
  <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>p-2<span class="token punctuation">"</span></span>
<span class="token punctuation">/></span></span></code></pre><div class="notion-text notion-block-9754a9a2b43c484a818722b5e50d3430">答案是使用<code class="notion-inline-code">process.env.NEXT_PUBLIC_ASSET_PREFIX</code>这个环境变量，在github action编译时，通过修改Build过程时的环境变量指定环境为production，使<code class="notion-inline-code">NEXT_PUBLIC_ASSET_PREFIX</code> 这个环境变量变为<code class="notion-inline-code">/Portofolio</code> ，从而指向正确的地址</div><pre class="notion-code language-yaml"><code class="language-yaml"><span class="token operator">-</span> name<span class="token operator">:</span> Build <span class="token keyword">with</span> Next<span class="token punctuation">.</span>js
  <span class="token literal-property property">run</span><span class="token operator">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> steps<span class="token punctuation">.</span>detect<span class="token operator">-</span><span class="token keyword">package</span><span class="token operator">-</span>manager<span class="token punctuation">.</span>outputs<span class="token punctuation">.</span>runner <span class="token punctuation">}</span><span class="token punctuation">}</span> next build
  <span class="token literal-property property">env</span><span class="token operator">:</span>
    <span class="token constant">NODE_ENV</span><span class="token operator">:</span> production
    <span class="token constant">NEXT_PUBLIC_ASSET_PREFIX</span><span class="token operator">:</span> <span class="token operator">/</span>Portofolio</code></pre><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-ce0a67933863424d936e4f059261f1eb" data-id="ce0a67933863424d936e4f059261f1eb"><span><div id="ce0a67933863424d936e4f059261f1eb" class="notion-header-anchor"></div><a class="notion-hash-link" href="#ce0a67933863424d936e4f059261f1eb" title="一些环境体操"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">一些环境体操</span></span></h3><ol start="1" class="notion-list notion-list-numbered notion-block-785b2436b65549928d24ef99928d6c52"><li>为什么需要使用<code class="notion-inline-code">(process.env.NEXT_PUBLIC_ASSET_PREFIX || &quot;&quot;)</code> ，而不是在dev环境下将<code class="notion-inline-code">NEXT_PUBLIC_ASSET_PREFIX</code> 这个变量设为空？因为根据我的观察，只要你试图把一个环境变量设为空，他就会变成<code class="notion-inline-code">undefined</code> ，所以干脆就这么写了</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-d2cf59672be64c62aa3cdf7e2972de79"><li>这个basePath也是，他只会更改你的项目的基本地址，不会自动更改你的静态资源的路径，也就是说如果把basePath设为<code class="notion-inline-code">/Portofolio</code> ，你本地的开发环境地址就会从127.0.0.1:3000变成127.0.0.1:3000/Portofolio，</li></ol><ol start="3" class="notion-list notion-list-numbered notion-block-e26509f3ddbf4a72a1188d2b146a86ea"><li>assetPrefix也是同理，没什么卵用，听起来像是能给你的静态资源加个前缀，但是没用</li></ol><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-af7391a212934dca9ae2773e78436861" data-id="af7391a212934dca9ae2773e78436861"><span><div id="af7391a212934dca9ae2773e78436861" class="notion-header-anchor"></div><a class="notion-hash-link" href="#af7391a212934dca9ae2773e78436861" title="关于basePath和assetPrefix"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">关于basePath和assetPrefix</span></span></h3><h4 class="notion-h notion-h3 notion-h-indent-2 notion-block-9a45a74fdaaa493da8698f5aafcd836f" data-id="9a45a74fdaaa493da8698f5aafcd836f"><span><div id="9a45a74fdaaa493da8698f5aafcd836f" class="notion-header-anchor"></div><a class="notion-hash-link" href="#9a45a74fdaaa493da8698f5aafcd836f" title="basePath"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">basePath</span></span></h4><div class="notion-row"><a target="_blank" rel="noopener noreferrer" class="notion-bookmark notion-block-741f507e062e4142a3e7757219c22cd0" href="https://nextjs.org/docs/app/api-reference/next-config-js/basePath"><div><div class="notion-bookmark-title">next.config.js Options: basePath</div><div class="notion-bookmark-description">Use `basePath` to deploy a Next.js application under a sub-path of a domain.</div><div class="notion-bookmark-link"><img src="https://nextjs.org/favicon.ico" alt="next.config.js Options: basePath" loading="lazy"/><div>https://nextjs.org/docs/app/api-reference/next-config-js/basePath</div></div></div><div class="notion-bookmark-image"><img src="https://nextjs.org/api/docs-og?title=next.config.js%20Options:%20basePath" alt="next.config.js Options: basePath" loading="lazy"/></div></a></div><div class="notion-text notion-block-06a0763c80124f00aaafdb5f3fd83556">该选项用于在一个子路径下部署项目，他主要在两种场景下生效：</div><ol start="1" class="notion-list notion-list-numbered notion-block-651c03fc7c2d4fc4a28f2fd7ca957aa6"><li>Links：当使用<code class="notion-inline-code">next/link</code>和<code class="notion-inline-code">next/router</code> 时，会自动添加basePath，也就是说<code class="notion-inline-code">&lt;Link href=&quot;/about&quot;&gt;About Page&lt;/Link&gt;</code> 会输出<code class="notion-inline-code">&lt;a href=&quot;/docs/about&quot;&gt;About Page&lt;/a&gt;</code> （<code class="notion-inline-code">basePath=’/docs’</code>）</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-ab119fb430df420fb41a70c4a81a8653"><li>Image：当使用<code class="notion-inline-code">next/image</code> 时，需要手动添加basePath，就像我做的那样</li></ol><h4 class="notion-h notion-h3 notion-h-indent-2 notion-block-460d264b99a948c58302d4dc80d24ca3" data-id="460d264b99a948c58302d4dc80d24ca3"><span><div id="460d264b99a948c58302d4dc80d24ca3" class="notion-header-anchor"></div><a class="notion-hash-link" href="#460d264b99a948c58302d4dc80d24ca3" title="assetPrefix"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">assetPrefix</span></span></h4><div class="notion-row"><a target="_blank" rel="noopener noreferrer" class="notion-bookmark notion-block-4435f1e4fe294c81805b4150c3a69c09" href="https://nextjs.org/docs/app/api-reference/next-config-js/assetPrefix"><div><div class="notion-bookmark-title">next.config.js Options: assetPrefix</div><div class="notion-bookmark-description">Learn how to use the assetPrefix config option to configure your CDN.</div><div class="notion-bookmark-link"><img src="https://nextjs.org/favicon.ico" alt="next.config.js Options: assetPrefix" loading="lazy"/><div>https://nextjs.org/docs/app/api-reference/next-config-js/assetPrefix</div></div></div><div class="notion-bookmark-image"><img src="https://nextjs.org/api/docs-og?title=next.config.js%20Options:%20assetPrefix" alt="next.config.js Options: assetPrefix" loading="lazy"/></div></a></div><div class="notion-text notion-block-65dc149178ad4d22b5aa71a0fc0b7283">该选项仅针对<code class="notion-inline-code">_next/static</code> 下的静态js css资源，不会影响public下的资源，当然，这个选项还是要设的，不然可能css和js也会因为指向根目录而找不到</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-a0b6b14e17f24df4b8ff9b681fe04ece" data-id="a0b6b14e17f24df4b8ff9b681fe04ece"><span><div id="a0b6b14e17f24df4b8ff9b681fe04ece" class="notion-header-anchor"></div><a class="notion-hash-link" href="#a0b6b14e17f24df4b8ff9b681fe04ece" title="可能的另一种方式：自定义ImageLoader"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">可能的另一种方式：自定义ImageLoader</span></span></h3><div class="notion-row"><a target="_blank" rel="noopener noreferrer" class="notion-bookmark notion-block-1c7c643a565649f4a869bf3289b3616a" href="https://nextjs.org/docs/app/api-reference/next-config-js/images"><div><div class="notion-bookmark-title">next.config.js Options: images</div><div class="notion-bookmark-description">Custom configuration for the next/image loader</div><div class="notion-bookmark-link"><img src="https://nextjs.org/favicon.ico" alt="next.config.js Options: images" loading="lazy"/><div>https://nextjs.org/docs/app/api-reference/next-config-js/images</div></div></div><div class="notion-bookmark-image"><img src="https://nextjs.org/api/docs-og?title=next.config.js%20Options:%20images" alt="next.config.js Options: images" loading="lazy"/></div></a></div><div class="notion-text notion-block-739c9da903e1405bb196d7b7c496321b">使用<code class="notion-inline-code">next/image</code>时，可以通过自定义imageloader的方式，使用一个函数来返回对应的路径，这个函数就可以对src进行路径拼接等处理，以避免出现<code class="notion-inline-code">(process.env.NEXT_PUBLIC_ASSET_PREFIX || &quot;&quot;) + icon</code> 这样不优雅的代码</div><div class="notion-blank notion-block-770e0fdd9fd94d36be070c71bfa7a1bd"> </div></main></div></article><div class="flex justify-between font-medium text-gray-500 dark:text-gray-400"><a><button class="mt-2 cursor-pointer hover:text-black dark:hover:text-gray-100">← <!-- -->返回</button></a><a><button class="mt-2 cursor-pointer hover:text-black dark:hover:text-gray-100">↑ <!-- -->回到顶部</button></a></div><div></div></main><div class="mt-6 flex-shrink-0 m-auto w-full text-gray-500 dark:text-gray-400 transition-all max-w-3xl px-4"><hr class="border-gray-200 dark:border-gray-600"/><div class="my-4 text-sm leading-6"><div class="flex align-baseline justify-between flex-wrap"><p>© <!-- -->Musher<!-- --> <!-- -->2019 - 2024</p><p>powered by <a href="https://github.com/craigary/nobelium"><u>nobelium</u></a></p></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","date":{"start_date":"2024-05-29"},"type":["Post"],"slug":"sci-fi-title-generator","tags":["React","Next.js","Website"],"summary":"总结一下使用Nextjs部署github page时遇到的img标签的路径问题","title":"Portfolio 项目总结","status":["Published"],"createdTime":"Mon May 13 2024 06:26:39 GMT+0000 (Coordinated Universal Time)","fullWidth":false,"pageIcon":"🏠","pageCover":"/images/page-cover/nasa_eagle_in_lunar_orbit.jpg"},"blockMap":{"block":{"c62e81a1-03a9-4b5c-9a55-4e56867de3e4":{"value":{"id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","version":298,"type":"page","properties":{"NX\\Q":[["‣",[["d",{"type":"date","start_date":"2024-05-29"}]]]],"`gQ~":[["Post"]],"d]hq":[["sci-fi-title-generator"]],"sD^m":[["React,Next.js,Website"]],"wz|S":[["总结一下使用Nextjs部署github page时遇到的img标签的路径问题"]],"title":[["Portfolio 项目总结"]],"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":[["Published"]]},"content":["0a4c3d88-bc0f-4976-8be9-047295ce0b24","6e3b0acb-0544-40a7-91cb-c33f5db7e377","df693aea-0040-43f1-876e-fd43f7bb5f49","0aafaa20-5c70-42fb-801b-dc999bd6e9d9","9754a9a2-b43c-484a-8187-22b5e50d3430","ee602031-0545-4249-a0ef-c684bf4f4e93","ce0a6793-3863-424d-936e-4f059261f1eb","785b2436-b655-4992-8d24-ef99928d6c52","d2cf5967-2be6-4c62-aa3c-df7e2972de79","e26509f3-ddbf-4a72-a118-8d2b146a86ea","af7391a2-1293-4dca-9ae2-773e78436861","9a45a74f-daaa-493d-a869-8f5aafcd836f","741f507e-062e-4142-a3e7-757219c22cd0","06a0763c-8012-4f00-aaaf-db5f3fd83556","651c03fc-7c2d-4fc4-a28f-2fd7ca957aa6","ab119fb4-30df-420f-b41a-70c4a81a8653","460d264b-99a9-48c5-8302-d4dc80d24ca3","4435f1e4-fe29-4c81-805b-4150c3a69c09","65dc1491-78ad-4d22-b5aa-71a0fc0b7283","a0b6b14e-17f2-4df4-b8ff-9b681fe04ece","1c7c643a-5656-49f4-a869-bf3289b3616a","739c9da9-03e1-405b-b196-d7b7c496321b","770e0fdd-9fd9-4d36-be07-0c71bfa7a1bd"],"format":{"page_icon":"🏠","page_cover":"/images/page-cover/nasa_eagle_in_lunar_orbit.jpg","page_cover_position":0.6},"created_time":1715581599797,"last_edited_time":1716963363682,"parent_id":"4126d965-c550-46af-bc34-c038f0103084","parent_table":"collection","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"0eb813c6-179c-43e0-8c12-27cc22341e33":{"value":{"id":"0eb813c6-179c-43e0-8c12-27cc22341e33","version":27,"type":"collection_view_page","view_ids":["1df80a31-46e8-4fcd-b9a3-dde8ded944c9"],"collection_id":"4126d965-c550-46af-bc34-c038f0103084","format":{"block_locked":false,"block_locked_by":"2c0e0b01-f59e-4e03-b7b6-7d706eecada3","collection_pointer":{"id":"4126d965-c550-46af-bc34-c038f0103084","table":"collection","spaceId":"01ff42de-5b53-40d7-a69e-999e3574e640"},"copied_from_pointer":{"id":"ee99f65a-23ab-44f8-ac80-270122ee8138","table":"block","spaceId":"b3580129-1025-4b78-9e73-0a6f39f464ab"}},"permissions":[{"role":"editor","type":"user_permission","user_id":"4e783237-cc83-440e-9604-bac369009c55"},{"role":"reader","type":"public_permission","added_timestamp":1716963272589}],"created_time":1716962484995,"last_edited_time":1716963322503,"parent_id":"01ff42de-5b53-40d7-a69e-999e3574e640","parent_table":"space","alive":true,"copied_from":"ee99f65a-23ab-44f8-ac80-270122ee8138","created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"0a4c3d88-bc0f-4976-8be9-047295ce0b24":{"value":{"id":"0a4c3d88-bc0f-4976-8be9-047295ce0b24","version":47,"type":"header","properties":{"title":[["静态资源路径问题"]]},"created_time":1716950035639,"last_edited_time":1716950043546,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"6e3b0acb-0544-40a7-91cb-c33f5db7e377":{"value":{"id":"6e3b0acb-0544-40a7-91cb-c33f5db7e377","version":29,"type":"code","properties":{"title":[["/** @type {import('next').NextConfig} */\nconst isProd = process.env.NODE_ENV === \"production\";\nconst nextConfig = {\n  output: \"export\",\n  basePath: isProd ? \"/Portofolio\" : \"\",\n  assetPrefix: isProd ? \"/Portofolio/\" : \"\",\n  images: {\n    unoptimized: true,\n  },\n  env: {\n    NEXT_PUBLIC_ASSET_PREFIX: isProd ? \"/Portofolio\" : \"\",\n  },\n};\n\nexport default nextConfig;"]],"language":[["JavaScript"]]},"created_time":1716949365767,"last_edited_time":1716949376078,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"df693aea-0040-43f1-876e-fd43f7bb5f49":{"value":{"id":"df693aea-0040-43f1-876e-fd43f7bb5f49","version":877,"type":"text","properties":{"title":[["部署项目的过程中出现的问题：对于public文件夹中的静态资源，可以直接通过"],["/1.png",[["c"]]],["访问，但编译后的"],["/1.png",[["c"]]],["，将直接指向根目录，在本地这是"],["C://",[["c"]]],["，在github page这是"],["musherm.github.io/",[["c"]]],["，但实际上的静态资源地址在"],["musherm.github.io/Portofolio",[["c"]]],["，该如何正确指向该地址？"]]},"created_time":1716949377965,"last_edited_time":1716949828314,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"0aafaa20-5c70-42fb-801b-dc999bd6e9d9":{"value":{"id":"0aafaa20-5c70-42fb-801b-dc999bd6e9d9","version":176,"type":"code","properties":{"title":[["// icon='/b1.svg'\n\u003cimg\n  src={\n    (process.env.NEXT_PUBLIC_ASSET_PREFIX || \"\") + icon\n  }\n  alt={icon}\n  className=\"p-2\"\n/\u003e"]],"language":[["HTML"]]},"created_time":1716949829351,"last_edited_time":1716950097692,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"9754a9a2-b43c-484a-8187-22b5e50d3430":{"value":{"id":"9754a9a2-b43c-484a-8187-22b5e50d3430","version":511,"type":"text","properties":{"title":[["答案是使用"],["process.env.NEXT_PUBLIC_ASSET_PREFIX",[["c"]]],["这个环境变量，在github action编译时，通过修改Build过程时的环境变量指定环境为production，使"],["NEXT_PUBLIC_ASSET_PREFIX",[["c"]]],[" 这个环境变量变为"],["/Portofolio",[["c"]]],[" ，从而指向正确的地址"]]},"created_time":1716949794179,"last_edited_time":1716950017726,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"ee602031-0545-4249-a0ef-c684bf4f4e93":{"value":{"id":"ee602031-0545-4249-a0ef-c684bf4f4e93","version":88,"type":"code","properties":{"title":[["- name: Build with Next.js\n  run: ${{ steps.detect-package-manager.outputs.runner }} next build\n  env:\n    NODE_ENV: production\n    NEXT_PUBLIC_ASSET_PREFIX: /Portofolio"]],"language":[["YAML"]]},"created_time":1716949953467,"last_edited_time":1716949975205,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"ce0a6793-3863-424d-936e-4f059261f1eb":{"value":{"id":"ce0a6793-3863-424d-936e-4f059261f1eb","version":36,"type":"sub_header","properties":{"title":[["一些环境体操"]]},"created_time":1716950154513,"last_edited_time":1716950157926,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"785b2436-b655-4992-8d24-ef99928d6c52":{"value":{"id":"785b2436-b655-4992-8d24-ef99928d6c52","version":501,"type":"numbered_list","properties":{"title":[["为什么需要使用"],["(process.env.NEXT_PUBLIC_ASSET_PREFIX || \"\")",[["c"]]],[" ，而不是在dev环境下将"],["NEXT_PUBLIC_ASSET_PREFIX",[["c"]]],[" 这个变量设为空？因为根据我的观察，只要你试图把一个环境变量设为空，他就会变成"],["undefined",[["c"]]],[" ，所以干脆就这么写了"]]},"created_time":1716950158525,"last_edited_time":1716951248127,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"d2cf5967-2be6-4c62-aa3c-df7e2972de79":{"value":{"id":"d2cf5967-2be6-4c62-aa3c-df7e2972de79","version":643,"type":"numbered_list","properties":{"title":[["这个basePath也是，他只会更改你的项目的基本地址，不会自动更改你的静态资源的路径，也就是说如果把basePath设为"],["/Portofolio",[["c"]]],[" ，你本地的开发环境地址就会从127.0.0.1:3000变成127.0.0.1:3000/Portofolio，"]]},"created_time":1716951317442,"last_edited_time":1716951452727,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"e26509f3-ddbf-4a72-a118-8d2b146a86ea":{"value":{"id":"e26509f3-ddbf-4a72-a118-8d2b146a86ea","version":242,"type":"numbered_list","properties":{"title":[["assetPrefix也是同理，没什么卵用，听起来像是能给你的静态资源加个前缀，但是没用"]]},"created_time":1716951454249,"last_edited_time":1716951490463,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"af7391a2-1293-4dca-9ae2-773e78436861":{"value":{"id":"af7391a2-1293-4dca-9ae2-773e78436861","version":94,"type":"sub_header","properties":{"title":[["关于basePath和assetPrefix"]]},"created_time":1716951656033,"last_edited_time":1716951674130,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"9a45a74f-daaa-493d-a869-8f5aafcd836f":{"value":{"id":"9a45a74f-daaa-493d-a869-8f5aafcd836f","version":79,"type":"sub_sub_header","properties":{"title":[["basePath"]]},"created_time":1716951674555,"last_edited_time":1716951716972,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"741f507e-062e-4142-a3e7-757219c22cd0":{"value":{"id":"741f507e-062e-4142-a3e7-757219c22cd0","version":11,"type":"bookmark","properties":{"link":[["https://nextjs.org/docs/app/api-reference/next-config-js/basePath"]],"title":[["next.config.js Options: basePath"]],"description":[["Use `basePath` to deploy a Next.js application under a sub-path of a domain."]]},"format":{"bookmark_icon":"https://nextjs.org/favicon.ico","bookmark_cover":"https://nextjs.org/api/docs-og?title=next.config.js%20Options:%20basePath"},"created_time":1716951692498,"last_edited_time":1716951692499,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"06a0763c-8012-4f00-aaaf-db5f3fd83556":{"value":{"id":"06a0763c-8012-4f00-aaaf-db5f3fd83556","version":233,"type":"text","properties":{"title":[["该选项用于在一个子路径下部署项目，他主要在两种场景下生效："]]},"created_time":1716951240061,"last_edited_time":1716951745988,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"651c03fc-7c2d-4fc4-a28f-2fd7ca957aa6":{"value":{"id":"651c03fc-7c2d-4fc4-a28f-2fd7ca957aa6","version":406,"type":"numbered_list","properties":{"title":[["Links：当使用"],["next/link",[["c"]]],["和"],["next/router",[["c"]]],[" 时，会自动添加basePath，也就是说"],["\u003cLink href=\"/about\"\u003eAbout Page\u003c/Link\u003e",[["c"]]],[" 会输出"],["\u003ca href=\"/docs/about\"\u003eAbout Page\u003c/a\u003e",[["c"]]],[" （"],["basePath=’/docs’",[["c"]]],["）"]]},"created_time":1716951734847,"last_edited_time":1716951864366,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"ab119fb4-30df-420f-b41a-70c4a81a8653":{"value":{"id":"ab119fb4-30df-420f-b41a-70c4a81a8653","version":192,"type":"numbered_list","properties":{"title":[["Image：当使用"],["next/image",[["c"]]],[" 时，需要手动添加basePath，就像我做的那样"]]},"created_time":1716951867601,"last_edited_time":1716951897501,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"460d264b-99a9-48c5-8302-d4dc80d24ca3":{"value":{"id":"460d264b-99a9-48c5-8302-d4dc80d24ca3","version":47,"type":"sub_sub_header","properties":{"title":[["assetPrefix"]]},"created_time":1716951922375,"last_edited_time":1716951930207,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"4435f1e4-fe29-4c81-805b-4150c3a69c09":{"value":{"id":"4435f1e4-fe29-4c81-805b-4150c3a69c09","version":11,"type":"bookmark","properties":{"link":[["https://nextjs.org/docs/app/api-reference/next-config-js/assetPrefix"]],"title":[["next.config.js Options: assetPrefix"]],"description":[["Learn how to use the assetPrefix config option to configure your CDN."]]},"format":{"bookmark_icon":"https://nextjs.org/favicon.ico","bookmark_cover":"https://nextjs.org/api/docs-og?title=next.config.js%20Options:%20assetPrefix"},"created_time":1716951962847,"last_edited_time":1716951962848,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"65dc1491-78ad-4d22-b5aa-71a0fc0b7283":{"value":{"id":"65dc1491-78ad-4d22-b5aa-71a0fc0b7283","version":386,"type":"text","properties":{"title":[["该选项仅针对"],["_next/static",[["c"]]],[" 下的静态js css资源，不会影响public下的资源，当然，这个选项还是要设的，不然可能css和js也会因为指向根目录而找不到"]]},"created_time":1716951965842,"last_edited_time":1716952600575,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"a0b6b14e-17f2-4df4-b8ff-9b681fe04ece":{"value":{"id":"a0b6b14e-17f2-4df4-b8ff-9b681fe04ece","version":165,"type":"sub_header","properties":{"title":[["可能的另一种方式：自定义ImageLoader"]]},"created_time":1716952946184,"last_edited_time":1716952977890,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"1c7c643a-5656-49f4-a869-bf3289b3616a":{"value":{"id":"1c7c643a-5656-49f4-a869-bf3289b3616a","version":11,"type":"bookmark","properties":{"link":[["https://nextjs.org/docs/app/api-reference/next-config-js/images"]],"title":[["next.config.js Options: images"]],"description":[["Custom configuration for the next/image loader"]]},"format":{"bookmark_icon":"https://nextjs.org/favicon.ico","bookmark_cover":"https://nextjs.org/api/docs-og?title=next.config.js%20Options:%20images"},"created_time":1716952988842,"last_edited_time":1716952988843,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"739c9da9-03e1-405b-b196-d7b7c496321b":{"value":{"id":"739c9da9-03e1-405b-b196-d7b7c496321b","version":426,"type":"text","properties":{"title":[["使用"],["next/image",[["c"]]],["时，可以通过自定义imageloader的方式，使用一个函数来返回对应的路径，这个函数就可以对src进行路径拼接等处理，以避免出现"],["(process.env.NEXT_PUBLIC_ASSET_PREFIX || \"\") + icon",[["c"]]],[" 这样不优雅的代码"]]},"created_time":1716952990064,"last_edited_time":1716953081769,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"},"770e0fdd-9fd9-4d36-be07-0c71bfa7a1bd":{"value":{"id":"770e0fdd-9fd9-4d36-be07-0c71bfa7a1bd","version":3,"type":"text","created_time":1716953072104,"last_edited_time":1716953072104,"parent_id":"c62e81a1-03a9-4b5c-9a55-4e56867de3e4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4e783237-cc83-440e-9604-bac369009c55","last_edited_by_table":"notion_user","last_edited_by_id":"4e783237-cc83-440e-9604-bac369009c55","space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"}},"collection":{"4126d965-c550-46af-bc34-c038f0103084":{"value":{"id":"4126d965-c550-46af-bc34-c038f0103084","version":3,"name":[["NOBELIUM Template"]],"schema":{"NX\\Q":{"name":"date","type":"date"},"`gQ~":{"name":"type","type":"select","options":[{"id":"5aff2f95-fd1e-489b-8840-bf10bc9519cb","color":"purple","value":"Post"},{"id":"374d2bc6-a144-4832-8ca4-474aaae0ea1f","color":"orange","value":"Page"}]},"d]hq":{"name":"slug","type":"text"},"sD^m":{"name":"tags","type":"multi_select","options":[{"id":"b67fb051-ddd9-43b5-9fdf-7b7f97a2e056","color":"yellow","value":"Jekyll"},{"id":"2382b30f-9881-4a8b-ae7f-2d34979c4fb9","color":"pink","value":"Website"},{"id":"674b2636-c585-4057-8a6d-0d6ab9718f90","color":"blue","value":"Cooking"},{"id":"499d31ac-26f2-4fed-9ec4-17afe3c6d90d","color":"red","value":"Sociology"},{"id":"38611f8e-ab81-4a71-8d40-7bad1370b26a","color":"orange","value":"TEMP"},{"id":"1ad9233c-079a-44c7-98c3-24ed2faf1879","color":"purple","value":"Book"},{"id":"a3d8eb51-77ce-4e83-a9ae-68da9cee63fa","color":"default","value":"Design"},{"id":"87df7c95-06f0-477a-a530-14be415a1dcf","color":"gray","value":"React"},{"id":"76cb8fea-49e8-47c1-a982-b3a8a23d2278","color":"green","value":"Next.js"}]},"wz|S":{"name":"summary","type":"text"},"title":{"name":"title","type":"title"},"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":{"name":"status","type":"select","options":[{"id":"22460321-fea2-4c7c-b352-a674760780ac","color":"orange","value":"Idea"},{"id":"41d5f5c6-b53c-42bc-8e0f-fc9402048480","color":"yellow","value":"Draft"},{"id":"c7390b31-9fab-4e21-94ee-7e67ea077a97","color":"blue","value":"Revise"},{"id":"7abc61d4-b405-480d-b699-12588755fa65","color":"red","value":"Published"}]}},"icon":"🎟️","format":{"copied_from_pointer":{"id":"47ddddc3-991e-4ade-a7a4-a99e37f4d3ff","table":"collection","spaceId":"b3580129-1025-4b78-9e73-0a6f39f464ab"},"collection_page_properties":[{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"d]hq"},{"visible":false,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"sD^m"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"`gQ~"}]},"parent_id":"0eb813c6-179c-43e0-8c12-27cc22341e33","parent_table":"block","alive":true,"file_ids":["6cf3dc36-2f98-4f0e-9679-1bdbb1485129","5520bd92-e709-4c0d-ad58-06923f23f7e9","624d393a-62e3-4464-a1bf-1c79ecd4fbda","d52f6766-3e32-4c3d-8529-46e1f214360f"],"copied_from":"47ddddc3-991e-4ade-a7a4-a99e37f4d3ff","migrated":true,"space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"}},"space":{},"collection_view":{"1df80a31-46e8-4fcd-b9a3-dde8ded944c9":{"value":{"id":"1df80a31-46e8-4fcd-b9a3-dde8ded944c9","version":1,"type":"table","name":"Default view","format":{"table_wrap":false,"table_properties":[{"width":416,"visible":true,"property":"title"},{"width":186,"visible":true,"property":"d]hq"},{"width":211,"visible":true,"property":"NX\\Q"},{"width":147,"visible":true,"property":"wz|S"},{"width":222,"visible":true,"property":"sD^m"},{"width":124,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":100,"visible":true,"property":"`gQ~"},{"width":200,"visible":true,"property":"gY~W"},{"width":200,"visible":true,"property":"pzWp"},{"visible":true,"property":"B;[p"}]},"parent_id":"0eb813c6-179c-43e0-8c12-27cc22341e33","parent_table":"block","alive":true,"page_sort":["b1e1d645-db95-42e5-8995-39a80eda6460","e8cd3732-dc1c-43ae-959a-a5a611ec098a","e876558d-e878-47f6-8c95-21be678990a5","5a971ded-d3c5-41be-bef9-ddfff48d43a2","8db8b240-e1c5-4dd7-bf74-72584d7a2ce0","daf94ca4-ec56-47a3-84ed-b1e2479acc4b","d1a2db9b-6820-421e-9b80-017ce7478587","67ea9f83-b9f6-416b-afcb-7c64f7533e6c","45939470-9819-47e8-b12b-999cfefa0aad","c60dc33d-8efb-44be-a863-7a87ad047932","fe4b8d5f-7c49-42c6-a7d5-1cb71c4f7e86","b7233a67-c367-4198-831e-f12089568d1f","4f3bf306-92c4-41b7-a43e-957129a1240a","6a789607-66cf-498e-9b32-eb3fa69a84f4","c9429034-dabd-4a25-8782-97f20c808a60","38c49fe2-37f8-4a7f-a99f-9edb9ddad4c2","474eb638-9f6b-46bf-8004-77668293f199","81d6dfab-69cb-43a0-aa04-e9725f0b67e1","7703d956-84db-46cd-b538-48eae1af68b5","9f937c73-dac9-4ed7-9b01-beefcb321f16","3cf9dcb9-e7db-406c-80ab-c65c11fbf906","5827ab53-e051-455b-b90a-3bdc20158c2c","fa7acd3b-dea9-4fb1-b859-5345f35163c6","696dfc48-62c3-494d-96d0-ec5fa84637e8","79df93cf-9b10-452e-bc62-f39e8cd2d124","9bb8e52d-c459-4528-b1b3-c2378207253a","5da038ef-f419-4a11-aa48-587b3787e040","b4a2c9d4-6a2c-49e6-988d-89a538dfe0f6","c374a479-5cc7-4c54-ba69-6a4d76dc25ad","d470fa67-0e7c-40d8-86ac-9b5a8be88dc8","986be38b-9780-4bb9-bdcd-4e361ddbd888","b7613f56-c2d4-4aae-b967-b7471ade86d0","e357d1fc-7466-4d6a-8d48-71b76ea97cdc","e1735855-4089-4af6-bd4d-0d59f7a76cb4","9b34581a-955a-4229-99d0-8f2a6d0e69ce","b4414811-0599-45cf-b047-fa95eac42d89","c28a8a01-911a-40a2-a607-d3af8cb24017","461d07ae-4b4a-49de-bdcb-341af1153201","3df59023-cb68-4a65-afd1-7f0b8c21cb57","0e3223d1-03df-40fb-90f9-cc8559d776b5","4f45b7d6-cd5b-46ab-b2a6-37ae20bf5f21","fa475a21-5f38-43d4-9a89-67c40b3129ae","97cbc634-fe3a-4b9b-9da6-ac4aaa94772f","8a0d34bc-7e8c-4a68-88a5-5276274f612a","623f8788-a20f-45fd-bb82-08935f59b44d","7ee398f0-450b-47cb-9b53-f5e7736590d2","eae9f077-591e-4841-903b-db395513c834","367d0f2a-0b10-4dbb-b53a-613152f124f9","398e2e28-3997-49bc-a138-0467d4da8531","8aaf4633-e879-44dc-82c8-3c9fb9d3a6f8","1eb5e5f2-8dc9-4ffc-b5e1-09b67be27a83","83465fb9-205b-41fc-83a6-424692ee0a0e","fb1d18d0-6403-4e8a-840e-134553748ff5","4407cb77-3838-4ba5-b474-f15222cd3dba","1880b0f2-e036-42d0-9550-0fb08a962397","d8d60bd6-33f6-458f-a7d6-209ef2fb05a1","29bf65ff-888b-4a76-a8dd-bf54f02c3864","bad1d4ae-fd4a-4671-ae94-dd53d94e0eae","0d59792d-db1c-4ae7-8d7c-4f013be40dcf","337dc259-2805-4b1c-a60f-1b3e6c7badb8","4b1b21a8-c278-4bc6-88f1-1a35d407f4d7","7946aba2-d6d0-45ef-8779-23fa15db8f2d","c18dbce6-9e8c-4f4b-b74a-0994e7c1bc3f","84aa87b7-39e7-493c-87b9-5cae4de95449","1446eadb-8c01-4295-be3a-ecf19361c143","fe8a7d94-e9ba-457d-8f19-10fe53e6ca3c","98a5a0b6-b07b-4065-a73f-2949ad28ac47","6efcebe0-a779-4ec2-a1cb-f77acbb36bf6","f24edd31-035d-4744-9275-118e8751f2f9","975051d4-ebbc-4b3f-98cf-1a52e5e4761d","e5d98bee-b2d5-4b45-ab0b-b77da24aebe7","acac2668-1062-4e7a-b095-eda067da8413","179025c4-d8a8-4c47-b621-9fd6a6f3339b","d256e5ed-5eac-43bb-a32e-581774962c23","59520f7f-1fe9-4c70-b059-8655b93e85df","5692c8b3-efa6-4f19-ab2e-4574afc33f46","9c40a253-b9e8-42cd-8a99-62aaa9789a5e","fd348e41-3e72-42d2-8425-be67e8586a28","3128120c-366d-4937-a28a-f18a446f249b","a1d00689-b6f7-418b-888e-0b47edc21286","090eeb36-6c03-462f-9ada-d544c584641f","e97e229c-7a7c-4ce6-81f7-2cf8700e22ab","926771d9-3aab-4640-8dec-b1202f54aa69","b9a5c48f-1b00-4ae9-94bc-f683d6b393ad","30602d25-a696-40ee-b0fa-c252403391cf","a5da67e2-2ac7-4c3a-8833-50d78f853f9b","cf2532d2-7c86-4027-ae70-a81784ff4769","c1e63240-b7fe-4e0e-b753-78a9210b7779","81581b92-d191-4010-8c4f-e2c0e0b4a4ee","69e2cb5f-2c4a-408a-95b5-9d03f8ccfab3","b5b9b1d9-377b-4053-b110-988a9ec54af7","9a223272-0900-4cc3-a503-2515824da515","7c88ce0f-c4be-4335-abfe-adaaa2c6c99e","79bf7035-9dfd-4193-b7d1-cd578a30ac85","a453aa9d-324d-448f-94f0-c8adb4692241","1030c439-2997-45a7-90ca-f2df5de62e3e","1235234b-cfee-4611-8a9b-c6b32b379585","710ff2f6-c05e-4403-b72a-512bb27ab51f","019d0c55-59ee-4247-90c8-5f9017c37ba5","d105e4c2-dfdb-4c58-b8f5-54e182894431","95585600-97d8-4d2c-bf0c-6b9164dbee54","51e53e64-e6dd-4fd6-8062-5d4455f0a1cb","f4ec684b-e5f1-44e9-a8a7-aca27f7ca6f3","177fa228-9099-4dd5-8969-c67f9c78bd0c","d5ab0d7a-0123-473f-84d4-81740defb9b4","548f6d36-c509-4b79-9c4b-59f227c7f550","c0901673-4f5e-4e51-ad87-0217f2d33a0c","0787f8d6-dc99-47c6-946e-2b008814bebc","0ade5216-1103-486a-aff0-a709ff825b02","a2c4dd21-985c-497d-b421-c2d8a9ec0eeb","908a498c-f7e3-4668-8afd-f179a027b4d9","4945e5c3-033d-467c-a8b3-b1479c1fdf0a","854f4584-28d5-43bd-938e-88d0957c78e3","6a6574f8-d63d-4fed-99c5-38f3df0364ac"],"query2":{"filter":{"operator":"and"},"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"01ff42de-5b53-40d7-a69e-999e3574e640"},"role":"reader"}},"notion_user":{},"collection_query":{},"signed_urls":{}},"emailHash":"4ac574457377d00535c99cd294c7250c"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"sci-fi-title-generator"},"buildId":"ZO-KWHKOMjkxVuegrG4mH","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>